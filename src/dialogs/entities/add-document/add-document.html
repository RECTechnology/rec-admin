<modal-header title="{{(isEdit ? 'EDIT_DOCUMENT': 'ADD_DOCUMENT')|translate}}" (click)="close(false)">
</modal-header>

<div class="padd-20 modal-body" style="min-height: 300px">
  <validation-errors #errors [errors]="validationErrors" *ngIf="validationErrors.length > 0"
    style="border: 1px solid #ddd!important; width: 100%; margin-bottom: 15px;">
  </validation-errors>

  <div class="row">


    <div class="col-lg-12">
      <input-field [(value)]="item.name" label="Name" [disabled]="loading"></input-field>
    </div>

    <div class="col-lg-12" *ngIf="!disableAccountSelector  ">
      <div class="group-col-left space-between" *ngIf="isEdit; else elseBlock" style="width :100%">
        <div *ngIf="item.account_id != null">
          <span class="small-text-2">{{'Account'|translate}}</span>
          <account-picker [disabled]="loading || disableAccountSelector || isEdit " [(id)]=" item.account_id"
            (idChange)="setAccount();">
          </account-picker>
        </div>
       
      </div>
      <ng-template #elseBlock>
        <span class="small-text-2">{{'Account'|translate}}</span>
        <account-picker [disabled]="loading || disableAccountSelector || isEdit " [(id)]=" item.account_id"
          (idChange)="setAccount();">
        </account-picker>
      </ng-template>
    </div>
    <div class="col-lg-12"  style="width: 100%; padding-bottom: 10px;"
      matTooltip="Filter by user">
      <div class="group-col-left space-between" *ngIf="isEdit; else elseBlock" style="width :100%">
        <div *ngIf="item.user_id != null">
          <span class="small-text-2">{{'USER'|translate}}</span>
          <user-picker style="margin: 0;" [(id)]="item.user_id" [disabled]="isEdit" (idChange)="setUser();">
          </user-picker>
        </div>
      </div>
      <ng-template #elseBlock>
        <span class="small-text-2">{{'USER'|translate}}</span>
        <user-picker style="margin: 0;" [(id)]="item.user_id" [disabled]="isEdit" (idChange)="setUser();">
        </user-picker>
      </ng-template>
    </div>
    
    <div class="col-lg-12 space-between" *ngIf="docKinds && docKinds.length">
      <input-field type="select" [(value)]="item.kind_id" label="Document Kind" [disabled]="isEdit"
        [options]="docKinds">
      </input-field>
    </div>

    <div class="col-lg-12 " style="padding-top: 15px;">
      <status-input-field [(value)]="item.status" label="{{'Status' | translate}}" (valueChange)="setType($event)">
      </status-input-field>
    </div>

    <div class="col-lg-12" style="padding-top: 20px;">
      <input-field [(value)]="item.status_text" label="{{'status_text'| translate}}" [disabled]="loading"
        (valueChange)="changeStatusText($event)"></input-field>
    </div>

    <div class="col-lg-12">
      <file-selector [disabled]="isEdit && (!item.auto_fetched || !isLemon)" label="Select Document"
        [(file)]="item.content"></file-selector>
    </div>

    <div class="col-lg-12 group-col-left marg-t-5">
      <span class="small-text-2 marg-b-5">
        {{'VALID_UNTIL'|translate}}
      </span>
      <div>
        <input matInput [matDatepicker]="picker" [(ngModel)]="item.valid_until">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </div>
    </div>
  </div>
  <div class="group-row-left center v" style="margin-top: 20px; justify-content: flex-end">
    <p class="col-error small-text" style="margin-right: 10px!important">{{error}}</p>
    <btn-loader [loading]="loading" [disabled]="!item.name" [text]="isEdit ? 'EDIT': 'ADD'" (click)="proceed()">
    </btn-loader>
  </div>
</div>