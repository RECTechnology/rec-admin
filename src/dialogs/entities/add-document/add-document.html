<modal-header title="{{(isEdit ? 'EDIT_DOCUMENT': 'ADD_DOCUMENT')|translate}}" (click)="close(false)">
</modal-header>

<div class="padd-20 modal-body" style="min-height: 300px">
  <validation-errors #errors [errors]="validationErrors" *ngIf="validationErrors.length > 0"
    style="border: 1px solid #ddd!important; width: 100%; margin-bottom: 15px;">
  </validation-errors>

  <div class="row">


    <div class="col-lg-12">
      <input-field [(value)]="item.name" label="Name" [disabled]="loading"></input-field>
    </div>

    <div class="col-lg-12" *ngIf="!disableAccountSelector" matTooltip="{{'Filter by account' | translate}}">
      <div class="group-col-left space-between" *ngIf="isEdit; else elseBlock" style="width :100%">
        <div *ngIf="item.account_id != null">
          <account-picker label="ACCOUNTS" [needsNone]="true" [disabled]="loading || disableAccountSelector || isEdit " [(item)]=" item.account"
            (itemChanged)="setAccount($event);">
          </account-picker>
        </div>

      </div>
      <ng-template #elseBlock>
        <account-picker label="ACCOUNTS" [needsNone]="true" [disabled]="loading || disableAccountSelector || isEdit " [(item)]=" item.account"
          (itemChanged)="setAccount($event);">
        </account-picker>
      </ng-template>
    </div>
    <div class="col-lg-12" style= "padding-bottom: 10px;" matTooltip="{{'Filter by user' | translate}}">
      <div class="group-col-left space-between" *ngIf="isEdit; else elseBlock" style="width :100%">
        <div *ngIf="item.user_id != null">
          <user-picker label="USERS" [needsNone]="true" [(item)]="item.user" [disabled]="isEdit" (itemChanged)="setUser($event);">
          </user-picker>
        </div>
      </div>
      <ng-template #elseBlock>
        <user-picker label="USERS" [needsNone]="true" [(item)]="item.user" [disabled]="isEdit" (itemChanged)="setUser($event);">
        </user-picker>
      </ng-template>
    </div>

    <div class="col-lg-12 space-between" matTooltip="{{'Filter by document_kind' | translate}}">
      <document-kind-picker [needsNone]="true" [(item)]="item.kind" (itemChanged)="kindChanged($event)" label="DOCUMENT_KIND">
      </document-kind-picker>
    </div>

    <div class="col-lg-12 " *ngIf="!isLemon" style="padding-top: 15px;" matTooltip="{{'Filter by status' | translate}}">
      <rec-status-selector label="Status" (itemChanged)="setType($event)"></rec-status-selector>
    </div>

    <div class="col-lg-12" style="padding-top: 20px;" *ngIf="!isLemon">
      <input-field [(value)]="item.status_text" label="{{'status_text'| translate}}" [disabled]="loading"
        (valueChange)="changeStatusText($event)"></input-field>
    </div>

    <div class="col-lg-12">
      <file-selector [isAvatar]="true" [disabled]="isEdit && (!item.auto_fetched || !isLemon)" label="Select Document"
        [(file)]="item.content"></file-selector>
    </div>

    <div class="col-lg-12 group-col-left marg-t-5">
      <span class="small-text-2 marg-b-5">
        {{'VALID_UNTIL'|translate}}
      </span>
      <div>
        <input matInput [matDatepicker]="picker" [(ngModel)]="item.valid_until">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </div>
    </div>
  </div>
  <div class="group-row-left center v" style="margin-top: 20px; justify-content: flex-end">
    <p class="col-error small-text" style="margin-right: 10px!important">{{error}}</p>
    <btn-loader [loading]="loading" [disabled]="!item.name" [text]="isEdit ? 'EDIT': 'ADD'" (click)="proceed()">
    </btn-loader>
  </div>
</div>